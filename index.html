<!doctype html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>گالری آثار — نسرین هویدا</title>
<meta name="description" content="گالری آنلاین نسرین هویدا — طراح و مدرس طراحی آکادمیک. گالری تصویری از طراحی‌ها، سبک مدرن هاشور، خلاقانه و آبرنگ و مدل‌های زنده." />
<style>
  :root{
    --bg:#fbf7f4;
    --card:#ffffff;
    --muted:#6b6b6b;
    --accent1:#b36b3f; /* gradient color */
    --accent2:#e4a56e;
    --radius:14px;
    --soft:#f0e9e6;
    font-family: "Vazirmatn", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#fbf7f4,#fff);color:#1a1a1a}
  .wrap{max-width:1200px;margin:26px auto;display:grid;grid-template-columns:1fr 320px;gap:28px;padding:0 18px;align-items:start}
  /* SIDEBAR */
  .card{background:var(--card);border-radius:var(--radius);padding:18px;border:1px solid rgba(0,0,0,0.04);box-shadow:0 8px 24px rgba(16,24,32,0.04)}
  .profile-pic{width:120px;height:120px;border-radius:50%;overflow:hidden;margin:0 auto 10px;box-shadow:0 6px 18px rgba(16,24,32,0.06)}
  .profile-pic img{width:100%;height:100%;object-fit:cover;display:block}
  h1.name{font-size:18px;margin:6px 0 2px;text-align:center}
  .role{font-size:13px;color:var(--muted);text-align:center;margin-bottom:8px}
  .contact{font-size:14px;color:var(--muted);line-height:1.6;text-align:center}
  .contact a{color:var(--accent1);text-decoration:none}
  .badge{display:inline-block;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#fff;padding:8px 12px;border-radius:10px;font-weight:700;margin:12px auto 8px;display:block;text-align:center}

  .filters{margin-top:14px;display:flex;flex-direction:column;gap:8px}
  .filter-btn{background:#fff;border:1px solid #efe5df;padding:10px;border-radius:8px;cursor:pointer;color:#3b3b3b}
  .filter-btn.active{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#fff;border:0}

  .about{margin-top:14px;color:var(--muted);font-size:14px;line-height:1.6;white-space:pre-wrap}

  /* MAIN */
  main{min-height:500px}
  header.top{
    display:flex;align-items:flex-start;gap:12px;justify-content:space-between;margin-bottom:12px;
  }
  .title{
    font-size:20px;font-weight:700;
  }
  .subtitle{color:var(--muted);font-size:13px;margin-top:6px}

  /* gallery grid */
  .grid{
    display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:18px;
  }
  .card-item{background:var(--card);border-radius:12px;overflow:hidden;border:1px solid rgba(0,0,0,0.03);box-shadow:0 6px 18px rgba(16,24,32,0.03);position:relative}
  .media{width:100%;height:0;padding-bottom:62%;position:relative;background:linear-gradient(180deg,#f6f6f6,#fff)}
  .media img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;display:block}
  .index-badge{position:absolute;left:8px;top:8px;background:rgba(0,0,0,0.6);color:#fff;padding:6px 8px;border-radius:8px;font-weight:700;font-size:13px}
  .caption{padding:12px;border-top:1px solid #faf7f5;background:#fff}
  .caption .title{font-weight:700;font-size:15px;margin-bottom:6px}
  .caption .meta{color:var(--muted);font-size:12px}

  /* lightbox */
  .lightbox{
    position:fixed;inset:0;background:rgba(6,10,12,0.75);display:none;align-items:center;justify-content:center;padding:28px;z-index:9999
  }
  .lightbox img{max-width:95%;max-height:85%;box-shadow:0 18px 60px rgba(0,0,0,0.6);border-radius:8px}

  /* responsive */
  @media (max-width:980px){
    .wrap{grid-template-columns:1fr; padding:0 12px}
    .card{margin-bottom:12px}
  }
</style>
</head>
<body>
  <div class="wrap" dir="rtl">
    <!-- MAIN GRID (left) -->
    <main>
      <div class="top">
        <div>
          <div class="title">گالری آثار — نسرین هویدا</div>
          <div class="subtitle">طراحی | سبک مدرن هاشور | خلاقانه و آبرنگ | مدل‌های زنده و فیگوراتیو</div>
        </div>
        <!-- upload removed per request -->
      </div>

      <section id="gallery-section" class="grid" aria-live="polite">
        <!-- items will be inserted by JS -->
      </section>
    </main>

    <!-- SIDEBAR -->
    <aside class="card" aria-label="Profile">
      <div class="profile-pic">
        <img src="nasrin_profile.jpg" alt="تصویر نسرین هویدا" />
      </div>
      <h1 class="name">نسرین هویدا</h1>
      <div class="role">طراح و مدرس طراحی آکادمیک</div>

      <div class="contact">
        <div>تلفن: 09196869919</div>
        <div>ایمیل‌ها: 
          <div><a href="mailto:nasrin.howaida@gmail.com">nasrin.howaida@gmail.com</a></div>
          <div><a href="mailto:nasrinhowaida.artist@gmail.com">nasrinhowaida.artist@gmail.com</a></div>
        </div>
      </div>

      <!-- badge removed download button as requested -->
      <div class="badge">رزومه (PDF)</div>

      <div class="filters" id="filters">
        <button class="filter-btn active" data-cat="all">همه</button>
        <button class="filter-btn" data-cat="Tarahi">طراحی</button>
        <button class="filter-btn" data-cat="Modern_Hashour">سبک مدرن هاشور</button>
        <button class="filter-btn" data-cat="Khalaghane_Abrang">خلاقانه و آبرنگ</button>
        <button class="filter-btn" data-cat="Model_Figurative">مدل‌های زنده و فیگوراتیو</button>
      </div>

      <div class="about" id="about">
        <!-- متنی از فایل رزومه برداشت شده و به عنوان درباره من استفاده شده -->
        تمرکز من بر خلق آثار نوآورانه است. در تمامی پروژه‌ها، خلاقیت همواره در اولویت قرار می‌گیرد و هر اثر بر اساس نگاهی متفاوت به سوژه و برخوردی منحصر به فرد با مدل شکل می‌گیرد. رویکرد من مبتنی بر توسعه ایده‌های بدیع و ارائه طراحی‌هایی فراتر از چارچوب‌های سنتی است.
      </div>
    </aside>
  </div>

  <!-- lightbox -->
  <div id="lightbox" class="lightbox" role="dialog" aria-hidden="true">
    <img src="" alt="" id="lightbox-img">
  </div>

<script>
/*
  gallery loader:
  - expects manifest.json in each folder with an array of filenames, e.g. ["5873207485265546326.jpg", ...]
  - folders list below must match exact folder names in repo root
  - builds a global numbered gallery and supports category filter
*/
const folders = [
  { key: "Khalaghane_Abrang", label: "خلاقانه و آبرنگ" },
  { key: "Model_Figurative", label: "مدل‌های زنده و فیگوراتیو" },
  { key: "Modern_Hashour", label: "سبک مدرن هاشور" },
  { key: "Tarahi", label: "طراحی" }
];

const galleryEl = document.getElementById('gallery-section');
const filtersEl = document.getElementById('filters');
let items = []; // {idx, folderKey, filename, url}

async function loadManifests(){
  let globalIndex = 1;
  for(const f of folders){
    const manifestPath = `/${f.key}/manifest.json`;
    try{
      const res = await fetch(manifestPath, {cache:'no-store'});
      if(!res.ok) { console.warn('manifest not found:', manifestPath); continue; }
      const list = await res.json();
      if(!Array.isArray(list)) { console.warn('manifest not array:', manifestPath); continue; }
      for(const fn of list){
        // safe URL join
        const url = `/${f.key}/${encodeURIComponent(fn)}`;
        items.push({
          idx: globalIndex,
          folderKey: f.key,
          filename: fn,
          url
        });
        globalIndex++;
      }
    } catch(err){
      console.warn('failed load manifest', manifestPath, err);
    }
  }
  renderGallery(items);
}

function renderGallery(arr){
  galleryEl.innerHTML = '';
  if(arr.length === 0){
    galleryEl.innerHTML = '<div style="color:var(--muted);padding:18px">تصویری یافت نشد.</div>';
    return;
  }
  for(const it of arr){
    const card = document.createElement('article');
    card.className = 'card-item';
    card.setAttribute('data-cat', it.folderKey);

    const media = document.createElement('div');
    media.className = 'media';
    const img = document.createElement('img');
    img.loading = 'lazy';
    img.src = it.url;
    img.alt = `${it.filename}`;
    // placeholder if image fails
    img.onerror = function(){ this.style.display='none'; media.classList.add('placeholder'); }
    img.onclick = ()=>openLightbox(it.url, it.filename);

    const idx = document.createElement('div');
    idx.className = 'index-badge';
    idx.textContent = String(it.idx);

    media.appendChild(img);
    media.appendChild(idx);

    const caption = document.createElement('div');
    caption.className = 'caption';
    const title = document.createElement('div');
    title.className = 'title';
    title.textContent = 'طرح'; // requested label
    const meta = document.createElement('div');
    meta.className = 'meta';
    meta.textContent = `${it.filename} — ${it.folderKey.replace('_',' ')}`;

    caption.appendChild(title);
    caption.appendChild(meta);

    card.appendChild(media);
    card.appendChild(caption);
    galleryEl.appendChild(card);
  }
}

// filtering logic
filtersEl.addEventListener('click', (e)=>{
  const btn = e.target.closest('.filter-btn');
  if(!btn) return;
  document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  const cat = btn.getAttribute('data-cat');
  if(cat === 'all'){
    renderGallery(items);
  } else {
    renderGallery(items.filter(i=>i.folderKey === cat));
  }
});

// simple lightbox
const lightbox = document.getElementById('lightbox');
const lbImg = document.getElementById('lightbox-img');
function openLightbox(url, alt){
  lbImg.src = url;
  lbImg.alt = alt;
  lightbox.style.display = 'flex';
  lightbox.setAttribute('aria-hidden','false');
}
lightbox.addEventListener('click', ()=>{
  lightbox.style.display = 'none';
  lightbox.setAttribute('aria-hidden','true');
  lbImg.src = '';
});

// kick off
loadManifests();
</script>
</body>
</html>
